{"version":3,"file":"static/js/209.8bdedadd.chunk.js","mappings":"kPAwEA,UA7DqB,WACnB,OAAuBA,EAAAA,EAAAA,MAAhBC,GAAiC,YAArB,GACnB,GAAsCC,EAAAA,EAAAA,KAA9BC,EAAY,EAAZA,aAAcC,EAAW,EAAXA,YAChBC,GAAWC,EAAAA,EAAAA,MAGXC,GAAWC,EAAAA,EAAAA,aAAYC,EAAAA,IAsC7B,OArCAC,EAAAA,EAAAA,YAAU,WACR,IAAIC,EAAeV,EAAaW,IAAI,gBAChCC,EAAcZ,EAAaW,IAAI,eACnCD,IAAgBG,EAAAA,EAAAA,IAAgBH,GAChCE,IAAeE,EAAAA,EAAAA,GAAqBF,GACpCA,GAAeV,EAAaU,GAC5BG,OAAOC,QAAQC,aAAa,CAAC,EAAGC,SAASC,MAAOJ,OAAOK,SAASC,UAEhE,IAAMC,EAAgB,CAAEC,MAAmB,OAAZb,QAAY,IAAZA,EAAAA,EAAgB,QAC/Cc,YAAW,WACTlB,EAASmB,OAAOH,EAAe,CAC7BI,UAAW,SAACC,GACVA,EAAKf,aACDE,EAAAA,EAAAA,GAAqBa,EAAKf,cAC1BE,EAAAA,EAAAA,GAAqB,MACzBX,EAAY,CACVyB,IAAKD,EAAKE,KAAKD,IACfE,KAAMH,EAAKE,KAAKC,KAChBC,MAAOJ,EAAKE,KAAKE,MACjBC,QAASL,EAAKE,KAAKG,QACnBC,KAAMN,EAAKE,KAAKI,MAEpB,EACAC,QAAS,WAES,SADAnB,OAAOK,SAASC,SAASc,MAAM,KAAK,MAElDC,EAAAA,EAAAA,OACAtB,EAAAA,EAAAA,GAAqB,MACrBZ,EAAa,MACbC,OAAYkC,GAEhB,IAEFjC,EAAS,QACX,GAAG,IAEL,GAAG,KAED,+BACE,SAAC,IAAK,CACJkC,eAAe,SACfC,WAAW,SACXC,OAAO,QACPC,MAAO,EACPC,GAAI,CACFC,WACE,kGACF,UAEF,SAAC,IAAG,CAACC,UAAU,MAAMC,IAAKC,EAAMJ,GAAI,CAAED,MAAO,UAIrD,C","sources":["pages/login/success/index.tsx"],"sourcesContent":["import { Box, Stack } from \"@mui/system\";\r\nimport { setGlobalAccessToken } from \"modules/login/context/accessToken\";\r\nimport { useAuthContext } from \"modules/login/context/authContext\";\r\nimport { refreshAdmin } from \"modules/login/loginFetch\";\r\nimport { deleteRefreshToken, setRefreshToken } from \"modules/login/token\";\r\nimport { useEffect } from \"react\";\r\nimport { useMutation } from \"react-query\";\r\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\r\n\r\nimport logo from \"../../../other/images/logo.png\";\r\n\r\nconst LoginSuccess = () => {\r\n  const [searchParams] = useSearchParams();\r\n  const { setCheckAuth, setUserInfo } = useAuthContext();\r\n  const navigate = useNavigate();\r\n  //   const refreshToken = getRefreshToken() ?? \"null\";\r\n\r\n  const $refresh = useMutation(refreshAdmin);\r\n  useEffect(() => {\r\n    let refreshToken = searchParams.get(\"refreshToken\");\r\n    let accessToken = searchParams.get(\"accessToken\");\r\n    refreshToken && setRefreshToken(refreshToken);\r\n    accessToken && setGlobalAccessToken(accessToken);\r\n    accessToken && setCheckAuth(accessToken);\r\n    window.history.replaceState({}, document.title, window.location.pathname);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    const refreshObject = { token: refreshToken ?? \"null\" };\r\n    setTimeout(() => {\r\n      $refresh.mutate(refreshObject, {\r\n        onSuccess: (data) => {\r\n          data.accessToken\r\n            ? setGlobalAccessToken(data.accessToken)\r\n            : setGlobalAccessToken(null);\r\n          setUserInfo({\r\n            _id: data.user._id,\r\n            name: data.user.name,\r\n            email: data.user.email,\r\n            picture: data.user.picture,\r\n            role: data.user.role,\r\n          });\r\n        },\r\n        onError: () => {\r\n          const urlPath = window.location.pathname.split(\"/\")[1];\r\n          if (urlPath !== \"quiz\") {\r\n            deleteRefreshToken();\r\n            setGlobalAccessToken(null);\r\n            setCheckAuth(null);\r\n            setUserInfo(undefined);\r\n          }\r\n        },\r\n      });\r\n      navigate(\"/main\");\r\n    }, 1000);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n  return (\r\n    <>\r\n      <Stack\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"100vh\"\r\n        width={1}\r\n        sx={{\r\n          background:\r\n            \" linear-gradient(45deg, rgba(140,17,193,1) 0%, rgba(68,63,224,1) 47%, rgba(17,171,203,1) 100%)\",\r\n        }}\r\n      >\r\n        <Box component=\"img\" src={logo} sx={{ width: 100 }}></Box>\r\n      </Stack>\r\n    </>\r\n  );\r\n};\r\nexport default LoginSuccess;\r\n"],"names":["useSearchParams","searchParams","useAuthContext","setCheckAuth","setUserInfo","navigate","useNavigate","$refresh","useMutation","refreshAdmin","useEffect","refreshToken","get","accessToken","setRefreshToken","setGlobalAccessToken","window","history","replaceState","document","title","location","pathname","refreshObject","token","setTimeout","mutate","onSuccess","data","_id","user","name","email","picture","role","onError","split","deleteRefreshToken","undefined","justifyContent","alignItems","height","width","sx","background","component","src","logo"],"sourceRoot":""}