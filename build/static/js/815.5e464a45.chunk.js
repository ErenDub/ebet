"use strict";(self.webpackChunkithanku=self.webpackChunkithanku||[]).push([[815],{4624:function(e,r,n){n.d(r,{AW:function(){return d},CF:function(){return l},_v:function(){return a},h8:function(){return u},uB:function(){return o}});var i=n(4165),t=n(5861),s=n(8907),a=function(){var e=(0,t.Z)((0,i.Z)().mark((function e(r){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.page,e.abrupt("return",(0,s.c)("/transactions?page=".concat(n),"GET",null));case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),d=function(){var e=(0,t.Z)((0,i.Z)().mark((function e(r){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.page,e.abrupt("return",(0,s.c)("/admin/users?page=".concat(n),"GET",null));case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),o=function(){var e=(0,t.Z)((0,i.Z)().mark((function e(r){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.data,e.abrupt("return",(0,s.c)("/admin/users/".concat(n._id),"PATCH",n));case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),l=function(){var e=(0,t.Z)((0,i.Z)().mark((function e(r){var n,t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r._id,t=r.data,e.abrupt("return",(0,s.c)("/admin/users/password/".concat(n),"PATCH",t));case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),u=function(){var e=(0,t.Z)((0,i.Z)().mark((function e(r){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r._id,e.abrupt("return",(0,s.c)("/admin/users/".concat(n),"DELETE",null));case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},4488:function(e,r,n){n.d(r,{o:function(){return a}});var i=n(4585),t=n(4162),s=(n(2791),n(184)),a=function(e){var r=e.page,n=e.pages,a=e.setPage;return(0,s.jsx)(t.Z,{alignItems:"center",width:1,my:2,children:(0,s.jsx)(t.Z,{spacing:2,children:(0,s.jsx)(i.Z,{count:n,page:r,onChange:function(e,r){a(r)}})})})}},6368:function(e,r,n){n.d(r,{q:function(){return c}});var i=n(6039),t=n(1680),s=n(9773),a=n(4390),d=n(9963),o=n(9827),l=n(807),u=(n(2791),n(184)),c=function(e){var r=e.head,n=e.body;return(0,u.jsx)(d.Z,{component:i.Z,children:(0,u.jsxs)(t.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,u.jsx)(o.Z,{children:(0,u.jsx)(l.Z,{children:r.map((function(e){return(0,u.jsx)(a.Z,{children:e.label},e.id)}))})}),(0,u.jsx)(s.Z,{children:n})]})})}},8808:function(e,r,n){n.d(r,{Z:function(){return a}});var i=n(7020),t=n(6039),s=n(184),a=function(e){var r=e.children;return(0,s.jsx)(i.Z,{component:t.Z,maxWidth:"xl",sx:{my:3,py:3},children:r})}},1815:function(e,r,n){n.r(r),n.d(r,{default:function(){return H}});var i=n(9439),t=n(5209),s=n(4565),a=n(1872),d=n(1441),o=n(807),l=n(4390),u=n(9276),c=n(4624),h=n(1413),f=n(1091),x=n(788),m=n(8440),p=n(464),Z=n(2232),j=n(9369),g=n(1159),b=n(2791),v=n(9230),w=n(1933),C=n(184),y=b.forwardRef((function(e,r){return(0,C.jsx)(Z.Z,(0,h.Z)({direction:"up",ref:r},e))})),k=function(e){var r=e._id,n=e.name,t=b.useState(!1),a=(0,i.Z)(t,2),d=a[0],o=a[1],l=function(){o(!1)},u=(0,v.$G)().t,h=(0,w.useMutation)(c.h8);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(f.Z,{color:"error",onClick:function(){o(!0)},children:u("admin.users.delete")}),(0,C.jsxs)(x.Z,{open:d,TransitionComponent:y,keepMounted:!0,onClose:l,"aria-describedby":"alert-dialog-slide-description",children:[(0,C.jsxs)(p.Z,{children:[u("admin.users.delete")," - ",n]}),(0,C.jsxs)(m.Z,{children:[(0,C.jsx)(s.Z,{children:u("admin.users.sureDelete")}),(0,C.jsxs)(j.Z,{direction:"row",mt:2,gap:1,children:[(0,C.jsx)(f.Z,{fullWidth:!0,onClick:function(){h.mutate({_id:r},{onSuccess:function(e){g.E.invalidateQueries({active:!0})}})},disabled:h.isLoading,children:u("admin.users.delete")}),(0,C.jsx)(f.Z,{onClick:l,fullWidth:!0,variant:"outlined",color:"error",children:u("main.donate.cancel")})]})]})]})]})},_=n(4695),P=n(4162),W=n(5953),q=n(5017),S=n(9195),T=n(2797),Q=function(e){var r=e.onClose,n=e.defaultValues,i=e._id,t=T.Ry().shape({password:T.Z_().required().min(8,"Must be at lease 8 symbols"),passwordConfirm:T.Z_().oneOf([T.iH("password"),null],"Passwords does not match").required()}),s=(0,S.cI)({defaultValues:n,resolver:(0,_.X)(t)}),a=s.control,d=s.handleSubmit,o=s.reset,l=s.formState.errors,x=(0,w.useMutation)(c.CF),m=(0,v.$G)().t;return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(P.Z,{justifyContent:"center",width:1,alignItems:"center",spacing:2,sx:{background:"background",maxWidth:{lg:"500px",xs:"300px"},borderRadius:1,mt:1},children:(0,C.jsx)(u.Z,{sx:{width:"100%"},children:(0,C.jsx)("form",{onSubmit:d((function(e){x.mutate({_id:i,data:e},{onSuccess:function(e){g.E.invalidateQueries({active:!0}),o(n,{keepDirty:!1}),r()}})})),children:(0,C.jsxs)(P.Z,{direction:"column",children:[(0,C.jsxs)(W.ZP,{container:!0,spacing:2,children:[(0,C.jsx)(W.ZP,{item:!0,xs:12,children:(0,C.jsx)(S.Qr,{control:a,name:"password",render:function(e){var r=e.field,n=e.fieldState.error;return(0,C.jsx)(q.Z,(0,h.Z)((0,h.Z)({fullWidth:!0,label:m("login.password"),type:"password",required:!0,error:!!l.password},r),{},{helperText:null===n||void 0===n?void 0:n.message}))}})}),(0,C.jsx)(W.ZP,{item:!0,xs:12,children:(0,C.jsx)(S.Qr,{control:a,name:"passwordConfirm",render:function(e){var r=e.field,n=e.fieldState.error;return(0,C.jsx)(q.Z,(0,h.Z)((0,h.Z)({fullWidth:!0,label:m("login.rpassword"),type:"password",required:!0,error:!!l.passwordConfirm},r),{},{helperText:null===n||void 0===n?void 0:n.message}))}})})]}),(0,C.jsxs)(P.Z,{direction:"row",mt:2,gap:1,children:[(0,C.jsx)(f.Z,{fullWidth:!0,type:"submit",disabled:x.isLoading,children:m("admin.users.submit")}),(0,C.jsx)(f.Z,{onClick:r,fullWidth:!0,variant:"outlined",color:"error",children:m("main.donate.cancel")})]})]})})})})})},E=b.forwardRef((function(e,r){return(0,C.jsx)(Z.Z,(0,h.Z)({direction:"up",ref:r},e))})),F=function(e){var r=e._id,n=b.useState(!1),t=(0,i.Z)(n,2),s=t[0],a=t[1],d=(0,v.$G)().t;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(f.Z,{color:"secondary",onClick:function(){a(!0)},children:d("admin.users.editPassword")}),(0,C.jsxs)(x.Z,{open:s,TransitionComponent:E,keepMounted:!0,onClose:function(){a(!1)},"aria-describedby":"alert-dialog-slide-description",children:[(0,C.jsx)(p.Z,{children:d("admin.users.editPassword")}),(0,C.jsx)(m.Z,{children:(0,C.jsx)(Q,{onClose:function(){return a(!1)},defaultValues:{password:"",passwordConfirm:""},_id:r})})]})]})},G=n(1898),A=n(9365),I=n(3057),M=n(4020),R=function(e){var r=e.onClose,n=e.defaultValues,i=T.Ry().shape({_id:T.Z_().required(),name:T.Z_().required(),email:T.Z_().required(),role:T.Z_().required(),picture:T.Z_().required()}),t=(0,S.cI)({defaultValues:n,resolver:(0,_.X)(i)}),s=t.control,a=t.handleSubmit,d=t.reset,o=t.formState.errors,l=(0,w.useMutation)(c.uB),x=(0,v.$G)().t;return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(P.Z,{justifyContent:"center",width:1,alignItems:"center",spacing:2,sx:{background:"background",maxWidth:{lg:"500px",xs:"300px"},borderRadius:1,mt:1},children:(0,C.jsx)(u.Z,{sx:{width:"100%"},children:(0,C.jsx)("form",{onSubmit:a((function(e){l.mutate({data:e},{onSuccess:function(e){g.E.invalidateQueries({active:!0}),d(n,{keepDirty:!1}),r()}})})),children:(0,C.jsxs)(P.Z,{direction:"column",children:[(0,C.jsxs)(W.ZP,{container:!0,spacing:2,children:[(0,C.jsx)(W.ZP,{item:!0,xs:12,lg:12,children:(0,C.jsx)(S.Qr,{control:s,name:"_id",render:function(e){var r=e.field;return(0,C.jsx)(q.Z,(0,h.Z)({fullWidth:!0,label:x("admin.userQuiz.firstName"),disabled:!0,type:"text",required:!0,error:!!o._id},r))}})}),(0,C.jsx)(W.ZP,{item:!0,xs:12,lg:12,children:(0,C.jsx)(S.Qr,{control:s,name:"name",render:function(e){var r=e.field;return(0,C.jsx)(q.Z,(0,h.Z)({fullWidth:!0,label:x("login.fullName"),type:"text",required:!0,error:!!o.name},r))}})}),(0,C.jsx)(W.ZP,{item:!0,xs:12,children:(0,C.jsx)(S.Qr,{control:s,name:"email",render:function(e){var r=e.field;return(0,C.jsx)(q.Z,(0,h.Z)({fullWidth:!0,label:x("login.email"),type:"text",required:!0,error:!!o.email},r))}})}),(0,C.jsx)(W.ZP,{item:!0,xs:12,lg:12,children:(0,C.jsx)(S.Qr,{control:s,name:"role",render:function(e){var r=e.field;return(0,C.jsxs)(G.Z,{required:!0,fullWidth:!0,children:[(0,C.jsx)(A.Z,{children:x("admin.users.role")}),(0,C.jsxs)(I.Z,(0,h.Z)((0,h.Z)({label:x("admin.users.role"),required:!0,error:!!o.role},r),{},{children:[(0,C.jsx)(M.Z,{value:"user",children:"User"}),(0,C.jsx)(M.Z,{value:"admin",children:"Admin"})]}))]})}})})]}),(0,C.jsxs)(P.Z,{direction:"row",mt:2,gap:1,children:[(0,C.jsx)(f.Z,{fullWidth:!0,type:"submit",disabled:l.isLoading,children:x("admin.users.submit")}),(0,C.jsx)(f.Z,{onClick:r,fullWidth:!0,variant:"outlined",color:"error",children:x("main.donate.cancel")})]})]})})})})})},V=b.forwardRef((function(e,r){return(0,C.jsx)(Z.Z,(0,h.Z)({direction:"up",ref:r},e))})),$=function(e){var r=e.userInfo,n=b.useState(!1),t=(0,i.Z)(n,2),s=t[0],a=t[1],d=(0,v.$G)().t;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(f.Z,{onClick:function(){a(!0)},children:d("admin.users.editPassword")}),(0,C.jsxs)(x.Z,{open:s,TransitionComponent:V,keepMounted:!0,onClose:function(){a(!1)},"aria-describedby":"alert-dialog-slide-description",children:[(0,C.jsx)(p.Z,{children:d("admin.users.editPassword")}),(0,C.jsx)(m.Z,{children:s&&(0,C.jsx)(R,{onClose:function(){return a(!1)},defaultValues:{_id:r._id,name:r.name,email:r.email,role:r.role,picture:r.picture}})})]})]})},L=n(4488),N=n(6368),D=n(8808),H=function(){var e=(0,b.useState)(1),r=(0,i.Z)(e,2),n=r[0],h=r[1],f=(0,v.$G)().t,x=(0,w.useQuery)("all-users-".concat(n),(function(){return(0,c.AW)({page:n})}));return(0,C.jsxs)(D.Z,{children:[(0,C.jsxs)(u.Z,{mb:2,width:1,children:[(0,C.jsx)(t.Z,{label:(0,C.jsx)(s.Z,{variant:"h1",children:f("header.allUsers")})}),(0,C.jsx)(a.Z,{})]}),x.isLoading&&(0,C.jsx)(d.Z,{width:"100%",height:500}),x.data&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(N.q,{head:[{label:"\u2116",id:"id"},{label:f("admin.users.registrationTime"),id:"firstName"},{label:f("login.fullName"),id:"lastName"},{label:f("login.email"),id:"email"},{label:f("admin.users.role"),id:"role"},{label:"",id:"edit"},{label:"",id:"editPassword"},{label:"",id:"delete"}],body:x.data.data.map((function(e,r){return(0,C.jsxs)(o.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,C.jsx)(l.Z,{component:"th",scope:"row",children:r+1+10*(n-1)}),(0,C.jsxs)(l.Z,{component:"th",scope:"row",children:[e.createdAt.split("T")[0]," -"," ",e.createdAt.split("T")[1].split(".")[0]," (UTC)"]}),(0,C.jsx)(l.Z,{component:"th",scope:"row",children:e.name}),(0,C.jsx)(l.Z,{component:"th",scope:"row",children:e.email}),(0,C.jsx)(l.Z,{children:e.role}),(0,C.jsx)(l.Z,{children:(0,C.jsx)($,{userInfo:e})}),(0,C.jsx)(l.Z,{children:(0,C.jsx)(F,{_id:e._id})}),(0,C.jsx)(l.Z,{children:(0,C.jsx)(k,{_id:e._id,name:e.name})})]},e._id)}))}),(0,C.jsx)(L.o,{page:n,pages:x.data.totalPages,setPage:h})]})]})}}}]);
//# sourceMappingURL=815.5e464a45.chunk.js.map